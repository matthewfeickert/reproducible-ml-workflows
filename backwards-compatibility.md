---
title: "Backwards compatibility with conda"
teaching: 10
exercises: 5
---

::: questions

* Can Pixi environments be backported to conda formats?

:::

::: objectives

* Learn how to export Pixi workspace environments as conda environment definition files
* Learn how to export Pixi workspace environments as conda explicit spec files

:::

## Backporting to conda environments

While Pixi is currently unique in its abilities, there may be situations in which given technical debt, migration effort in large collaborations, or collaborator preferences that switching all infrastructure to use Pixi might not yet be feasible.
It would still be useful to take advantage of Pixi's technology and features as an individual but be able to export Pixi workspace environments and lock files to the "legacy system" of conda.
^[Conda is still a very well supported tool and the dominant conda package environment manager by numbers of users.]
Luckily, we can do this with the [`pixi workspace export`](https://pixi.sh/latest/reference/cli/pixi/workspace/export/) commands.

## Exporting workspace environments to conda environment definition files

If you want to export a Pixi workspace environment's high level dependencies to a conda environment definition file (`environment.yaml`) you can use the [`pixi workspace export conda-environment`](https://pixi.sh/latest/reference/cli/pixi/workspace/export/conda-environment/) subcommand

```bash
pixi workspace export conda-environment --environment <environment> --platform <platform> environment.yaml
```

where if no `environment` or `platform` options are given the default environment and the system's platform will be used.

::: challenge

## Export one of your Pixi workspace environments to a conda environment

::: solution

## Possible answers

```bash
pixi workspace export conda-environment environment.yaml
```

```yaml
name: default
channels:
- conda-forge
- nodefaults
dependencies:
- python >=3.13.5,<3.14
- numpy >=2.3.2,<3
- notebook >=7.4.5,<8
- jupyterlab >=4.4.5,<5
```

:::
:::

## Exporting workspace environments to conda explicit spec files

We'd like to ideally go further than the high level conda environment definition file and aim for computational reproducibility with a [conda explicit spec file](https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html#building-identical-conda-environments).
Conda explicit spec files are a form of platform specific lock files that consist of a text file with an `@EXPLICIT` header followed by a list of conda package URLs, optionally followed by their MD5 or SHA256 digest (aka, "hash").

Example:

```txt
@EXPLICIT
https://conda.anaconda.org/conda-forge/noarch/python_abi-3.13-7_cp313.conda#e84b44e6300f1703cb25d29120c5b1d8
```

Explicit spec files can be created from locked Pixi workspace environments with the
[`pixi workspace export conda-explicit-spec`](https://pixi.sh/latest/reference/cli/pixi/workspace/export/conda-explicit-spec/) subcommand

```bash
pixi workspace export conda-explicit-spec --environment <environment> --platform <platform> .
```

where if no `environment` or `platform` options are given the default environment and the system's platform will be used.
The explicit spec file will be automatically named with the form `<environment>_<platform>_conda_spec.txt`.
So if you are on a `linux-64` machine and didn't specify an environment name, your generated explicit spec file will be named `default_linux-64_conda_spec.txt`.

::: caution

Conda spec files only support conda packages and do not support Python packages or source packages.

:::

::: challenge

## Export one of your Pixi workspace environment lock files as a conda explicit spec file

Hint: Check the `--help` output.

::: solution

## Possible answers

```bash
pixi workspace export conda-explicit-spec --platform linux-64 --platform osx-arm64 .
```

```bash
head -n 20 default_linux-64_conda_spec.txt
```

```output
# Generated by `pixi workspace export`
# platform: linux-64
@EXPLICIT
https://conda.anaconda.org/conda-forge/linux-64/libgomp-15.1.0-h767d61c_4.conda#3baf8976c96134738bba224e9ef6b1e5
https://conda.anaconda.org/conda-forge/linux-64/_libgcc_mutex-0.1-conda_forge.tar.bz2#d7c89558ba9fa0495403155b64376d81
https://conda.anaconda.org/conda-forge/linux-64/_openmp_mutex-4.5-2_gnu.tar.bz2#73aaf86a425cc6e73fcf236a5a46396d
https://conda.anaconda.org/conda-forge/linux-64/libgcc-15.1.0-h767d61c_4.conda#f406dcbb2e7bef90d793e50e79a2882b
https://conda.anaconda.org/conda-forge/linux-64/xorg-libxdmcp-1.1.5-hb9d3cd8_0.conda#8035c64cb77ed555e3f150b7b3972480
https://conda.anaconda.org/conda-forge/linux-64/xorg-libxau-1.0.12-hb9d3cd8_0.conda#f6ebe2cb3f82ba6c057dde5d9debe4f7
https://conda.anaconda.org/conda-forge/linux-64/pthread-stubs-0.4-hb9d3cd8_1002.conda#b3c17d95b5a10c6e64a21fa17573e70e
https://conda.anaconda.org/conda-forge/linux-64/libxcb-1.17.0-h8a09558_0.conda#92ed62436b625154323d40d5f2f11dd7
https://conda.anaconda.org/conda-forge/linux-64/xorg-libx11-1.8.12-h4f16b4b_0.conda#db038ce880f100acc74dba10302b5630
https://conda.anaconda.org/conda-forge/linux-64/xorg-libice-1.1.2-hb9d3cd8_0.conda#fb901ff28063514abb6046c9ec2c4a45
https://conda.anaconda.org/conda-forge/linux-64/libgcc-ng-15.1.0-h69a702a_4.conda#28771437ffcd9f3417c66012dc49a3be
https://conda.anaconda.org/conda-forge/linux-64/libuuid-2.38.1-h0b41bf4_0.conda#40b61aab5c7ba9ff276c41cfffe6b80b
https://conda.anaconda.org/conda-forge/linux-64/xorg-libsm-1.2.6-he73a12e_0.conda#1c74ff8c35dcadf952a16f752ca5aa49
https://conda.anaconda.org/conda-forge/linux-64/xorg-libxt-1.3.1-hb9d3cd8_0.conda#279b0de5f6ba95457190a1c459a64e31
https://conda.anaconda.org/conda-forge/noarch/tzdata-2025b-h78e105d_0.conda#4222072737ccff51314b5ece9c7d6f5a
https://conda.anaconda.org/conda-forge/linux-64/libzlib-1.3.1-hb9d3cd8_2.conda#edb0dca6bc32e4f4789199455a1dbeb8
https://conda.anaconda.org/conda-forge/linux-64/tk-8.6.13-noxft_hd72426e_102.conda#a0116df4f4ed05c303811a837d5b39d8
```

```bash
head -n 20 default_osx-arm64_conda_spec.txt
```
```output
# Generated by `pixi workspace export`
# platform: osx-arm64
@EXPLICIT
https://conda.anaconda.org/conda-forge/noarch/tzdata-2025b-h78e105d_0.conda#4222072737ccff51314b5ece9c7d6f5a
https://conda.anaconda.org/conda-forge/osx-arm64/libzlib-1.3.1-h8359307_2.conda#369964e85dc26bfe78f41399b366c435
https://conda.anaconda.org/conda-forge/osx-arm64/tk-8.6.13-h892fb3f_2.conda#7362396c170252e7b7b0c8fb37fe9c78
https://conda.anaconda.org/conda-forge/osx-arm64/tktable-2.10-h3c7de25_7.conda#7c2e2e25a80f1538b0dcee34026bec42
https://conda.anaconda.org/conda-forge/osx-arm64/ncurses-6.5-h5e97a16_3.conda#068d497125e4bf8a66bf707254fff5ae
https://conda.anaconda.org/conda-forge/osx-arm64/readline-8.2-h1d1bf99_2.conda#63ef3f6e6d6d5c589e64f11263dc5676
https://conda.anaconda.org/conda-forge/osx-arm64/bzip2-1.0.8-h99b78c6_7.conda#fc6948412dbbbe9a4c9ddbbcfe0a79ab
https://conda.anaconda.org/conda-forge/osx-arm64/pcre2-10.45-ha881caa_0.conda#a52385b93558d8e6bbaeec5d61a21cd7
https://conda.anaconda.org/conda-forge/osx-arm64/libpng-1.6.50-h280e0eb_1.conda#4d0f5ce02033286551a32208a5519884
https://conda.anaconda.org/conda-forge/osx-arm64/libiconv-1.18-hfe07756_1.conda#450e6bdc0c7d986acf7b8443dce87111
https://conda.anaconda.org/conda-forge/osx-arm64/libintl-0.25.1-h493aca8_0.conda#5103f6a6b210a3912faf8d7db516918c
https://conda.anaconda.org/conda-forge/osx-arm64/libffi-3.4.6-h1da3d7d_1.conda#c215a60c2935b517dcda8cad4705734d
https://conda.anaconda.org/conda-forge/osx-arm64/libglib-2.84.3-h587fa63_0.conda#bb98995c244b6038892fd59a694a93ed
https://conda.anaconda.org/conda-forge/osx-arm64/libfreetype6-2.13.3-h1d14073_1.conda#b163d446c55872ef60530231879908b9
https://conda.anaconda.org/conda-forge/osx-arm64/libfreetype-2.13.3-hce30654_1.conda#d06282e08e55b752627a707d58779b8f
https://conda.anaconda.org/conda-forge/osx-arm64/libexpat-2.7.1-hec049ff_0.conda#b1ca5f21335782f71a8bd69bdc093f67
https://conda.anaconda.org/conda-forge/osx-arm64/libcxx-20.1.8-hf598326_1.conda#a69ef3239d3268ef8602c7a7823fd982
```

:::
:::

::: caution

While conda spec files meet our criteria for computational reproducibility, they are essentially package list snapshots and lack the metadata to provide robust dependency graph inspection and targeted updates.
They can be a useful tool, but are not robust lock file formats like those from Pixi and [conda-lock](https://conda.github.io/conda-lock/).

:::

## Creating conda environments from the exports

To create a conda environment from the exported `environment.yaml` conda environment definition file, you use the normal conda environment creation command

```bash
conda env create --file environment.yaml
```

but to create a conda environment from the exported conda explicit spec file, use the command

```bash
conda create --name <name> --file <spec file>
```

or to install the packages given in the explicit spec file into an existing conda environment, use

```bash
conda install --name <name> --file <spec file>
```

So by using Pixi, you can fully export your workspace environments to conda environments and then use them, even to get the exact hash level locked environment from your Pixi workspace installed on another machine!

::: caution

Conda does not check that the platform is correct for the machine or the dependencies given when installing from an explicit spec file.
Only use spec files when you are certain that you have the same platform machine as the machine that created the spec file.

:::

::: keypoints

* If you need to use conda, you can export Pixi workspace environment to formats conda can use.
* Exporting conda explicit spec files from Pixi locked environments provides the ability to create the same hash level locked environment with conda that Pixi solved.

:::
